# AI 聊天控制指南

## 概述
AirSim 无人机控制系统现在包含了一个 AI 聊天助手，可以通过自然语言控制无人机。

## 使用方法

### 1. 启动系统
确保前端和后端服务都已启动：
```bash
# 后端 (需要激活 Python 环境)
cd backend
python -m uvicorn app.main:app --reload

# 前端
cd frontend
npm run dev
```

### 2. 找到聊天界面
- 聊天界面位于页面右下角
- 显示为一个带有"AI 助手"标题的白色浮动窗口
- 可以通过最小化按钮收起或展开

### 3. 支持的命令
你可以用自然语言向 AI 助手发送指令，例如：

#### 基础控制
- "解锁无人机"
- "起飞"
- "降落"
- "悬停"
- "紧急停止"

#### 移动控制
- "向前飞行5米"
- "向右移动3米"
- "上升到10米高度"
- "向后退2米"

#### 状态查询
- "当前位置"
- "当前高度"
- "电池电量"
- "飞行状态"

#### 复杂任务
- "起飞并飞到10米高"
- "向前飞5米然后悬停"
- "飞一个正方形路径"

### 4. 聊天界面功能
- **发送消息**: 在输入框中输入命令，按 Enter 或点击发送按钮
- **清除对话**: 点击垃圾桶图标清除聊天历史
- **最小化**: 点击最小化按钮将聊天窗口收起
- **连接状态**: 顶部的绿色/红色指示灯显示连接状态

### 5. 注意事项
- 确保 AirSim 仿真器已启动
- 无人机必须先解锁才能执行飞行命令
- AI 会自动检查安全限制（高度、速度、地理围栏）
- 所有命令都会在执行前进行验证

### 6. 故障排除
- **连接失败**: 检查后端服务是否运行在 http://localhost:8000
- **命令无响应**: 确保无人机已解锁且 AirSim 正在运行
- **聊天界面不显示**: 刷新页面或检查浏览器控制台错误

## 技术细节
- 使用 WebSocket 实现实时通信
- AI 服务通过 FastAPI 后端处理自然语言
- 支持工具调用以执行具体的无人机控制命令 